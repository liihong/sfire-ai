# ğŸ”¥ ç«æºæ–‡æ¡ˆ - å‰ç«¯å·¥ç¨‹è¯´æ˜ä¹¦

> AI é©±åŠ¨çš„çŸ­è§†é¢‘æ–‡æ¡ˆåˆ›ä½œå¹³å°å‰ç«¯é¡¹ç›®

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ ¸å¿ƒæ¨¡å—è¯´æ˜](#æ ¸å¿ƒæ¨¡å—è¯´æ˜)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [API è¯·æ±‚å°è£…](#api-è¯·æ±‚å°è£…)
- [å¤šå¹³å°é€‚é…](#å¤šå¹³å°é€‚é…)
- [AI æ¨¡å‹é…ç½®](#ai-æ¨¡å‹é…ç½®)
- [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
- [åæœŸæ•°æ®åº“æ‰©å±•è¯´æ˜](#åæœŸæ•°æ®åº“æ‰©å±•è¯´æ˜)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## é¡¹ç›®æ¦‚è¿°

**ç«æºæ–‡æ¡ˆ** æ˜¯ä¸€æ¬¾é¢å‘çŸ­è§†é¢‘åˆ›ä½œè€…çš„ AI æ–‡æ¡ˆç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒå¤šæ™ºèƒ½ä½“åˆ‡æ¢ã€IP äººè®¾ç®¡ç†ã€å¤šæ¨¡å‹å¯¹è¯ç­‰åŠŸèƒ½ã€‚é‡‡ç”¨ uni-app è·¨å¹³å°æ¡†æ¶å¼€å‘ï¼Œä¸€å¥—ä»£ç å¯åŒæ—¶ç¼–è¯‘åˆ°å¾®ä¿¡å°ç¨‹åºã€H5ã€App ç­‰å¤šä¸ªå¹³å°ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ¤– **å¤šæ™ºèƒ½ä½“å¯¹è¯** - å£æ’­æ–‡æ¡ˆã€å°çº¢ä¹¦ç§è‰ã€è¥é”€è½¬åŒ–ç­‰ä¸“ä¸šæ™ºèƒ½ä½“
- ğŸ­ **IP äººè®¾ç®¡ç†** - åˆ›å»ºå’Œç®¡ç†å¤šä¸ª IP é¡¹ç›®ï¼Œè‡ªå®šä¹‰äººè®¾é…ç½®
- ğŸ”„ **å¤šæ¨¡å‹åˆ‡æ¢** - æ”¯æŒ DeepSeekã€è±†åŒ…ã€Claude ç­‰å¤šç§ AI æ¨¡å‹
- ğŸ“ **æ–‡æ¡ˆä¸€é”®ç”Ÿæˆ** - è¾“å…¥ä¸»é¢˜å³å¯ç”Ÿæˆä¸“ä¸šæ–‡æ¡ˆ
- ğŸ“± **è·¨å¹³å°æ”¯æŒ** - å¾®ä¿¡å°ç¨‹åºã€H5ã€App ä¸€ç å¤šç«¯

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **uni-app** | 3.0.0-408042 | è·¨å¹³å°åº”ç”¨å¼€å‘æ¡†æ¶ |
| **Vue 3** | 3.4.21 | æ¸è¿›å¼ JavaScript æ¡†æ¶ï¼ˆComposition APIï¼‰ |
| **TypeScript** | 4.9.4 | JavaScript è¶…é›†ï¼Œæä¾›ç±»å‹å®‰å…¨ |
| **Vite** | 5.2.8 | ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…· |

### çŠ¶æ€ç®¡ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Pinia** | 2.3.1 | Vue 3 å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ |
| **pinia-plugin-persistedstate** | 4.7.1 | Pinia æŒä¹…åŒ–æ’ä»¶ |

### UI & æ ·å¼

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **SCSS/SASS** | 1.97.1 | CSS é¢„å¤„ç†å™¨ |
| **uni-ui** | - | uni-app å®˜æ–¹ç»„ä»¶åº“ï¼ˆæŒ‰éœ€å¼•å…¥ï¼‰ |

### å›½é™…åŒ–

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **vue-i18n** | 9.1.9 | Vue 3 å›½é™…åŒ–æ–¹æ¡ˆï¼ˆé¢„ç•™ï¼‰ |

### å¼€å‘å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| **vue-tsc** | Vue æ–‡ä»¶ TypeScript ç±»å‹æ£€æŸ¥ |
| **@dcloudio/types** | uni-app TypeScript ç±»å‹å£°æ˜ |
| **å¾®ä¿¡å¼€å‘è€…å·¥å…·** | å°ç¨‹åºè°ƒè¯•è¿è¡Œ |

---

## é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/                    # é¡µé¢ç›®å½•
â”‚   â”‚   â”œâ”€â”€ index/               # é¦–é¡µï¼ˆå‘ç°ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ login/               # ç™»å½•æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue        # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ profile.vue      # å®Œå–„èµ„æ–™é¡µ
â”‚   â”‚   â”œâ”€â”€ agent/               # æ™ºèƒ½ä½“å…¥å£
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ copywriting/         # AI æ–‡æ¡ˆç”Ÿæˆï¼ˆæ™ºèƒ½ä½“å¯¹è¯ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ project/             # é¡¹ç›®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ list.vue         # é¡¹ç›®åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ create.vue       # åˆ›å»ºé¡¹ç›®
â”‚   â”‚   â”‚   â””â”€â”€ dashboard.vue    # é¡¹ç›®æ§åˆ¶å°
â”‚   â”‚   â””â”€â”€ mine/                # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # å…¬å…±ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ModelSwitcher.vue    # æ¨¡å‹åˆ‡æ¢æ‚¬æµ®çƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                  # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts             # Store å¯¼å‡ºå…¥å£
â”‚   â”‚   â”œâ”€â”€ auth.ts              # ç”¨æˆ·è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ project.ts           # é¡¹ç›®ç®¡ç†çŠ¶æ€
â”‚   â”‚   â””â”€â”€ settings.ts          # å…¨å±€è®¾ç½®çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ request.ts           # è¯·æ±‚å°è£…ï¼ˆå«æ‹¦æˆªå™¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ static/                  # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ logo.png
â”‚   â”‚   â”œâ”€â”€ default-avatar.png
â”‚   â”‚   â””â”€â”€ tab/                 # TabBar å›¾æ ‡
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue                  # åº”ç”¨å…¥å£ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts                  # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ pages.json               # é¡µé¢è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ manifest.json            # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ uni.scss                 # å…¨å±€æ ·å¼å˜é‡
â”‚
â”œâ”€â”€ dist/                        # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ dev/
â”‚       â””â”€â”€ mp-weixin/           # å¾®ä¿¡å°ç¨‹åºç¼–è¯‘äº§ç‰©
â”‚
â”œâ”€â”€ vite.config.ts               # Vite é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ package.json                 # é¡¹ç›®ä¾èµ–é…ç½®
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.x
- **npm** >= 9.x æˆ– **pnpm** >= 8.x
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**ï¼ˆå°ç¨‹åºå¼€å‘ï¼‰

### å®‰è£…ä¾èµ–

```bash
cd frontend
npm install
```

### å¼€å‘è¿è¡Œ

```bash
# å¾®ä¿¡å°ç¨‹åº
npm run dev:mp-weixin

# H5 Web
npm run dev:h5

# å…¶ä»–å¹³å°
npm run dev:mp-alipay    # æ”¯ä»˜å®å°ç¨‹åº
npm run dev:mp-toutiao   # æŠ–éŸ³å°ç¨‹åº
npm run dev:mp-qq        # QQ å°ç¨‹åº
```

### ç”Ÿäº§æ„å»º

```bash
# å¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# H5 Web
npm run build:h5
```

### å¾®ä¿¡å°ç¨‹åºè°ƒè¯•

1. è¿è¡Œ `npm run dev:mp-weixin`
2. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
3. å¯¼å…¥é¡¹ç›® `dist/dev/mp-weixin` ç›®å½•
4. åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆè°ƒè¯•

---

## æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. æ™ºèƒ½ä½“å¯¹è¯æ¨¡å— (`pages/copywriting`)

æ ¸å¿ƒçš„ AI å¯¹è¯é¡µé¢ï¼Œæ”¯æŒå¤šæ™ºèƒ½ä½“åˆ‡æ¢å’Œå®æ—¶å¯¹è¯ã€‚

**æ™ºèƒ½ä½“ç±»å‹ï¼š**
| æ™ºèƒ½ä½“ | å›¾æ ‡ | è¯´æ˜ |
|--------|------|------|
| é«˜æ•ˆå£æ’­æ–‡æ¡ˆæ™ºèƒ½ä½“ | ğŸ™ï¸ | çŸ­è§†é¢‘å£æ’­æ–‡æ¡ˆï¼ŒèŠ‚å¥æ„Ÿå¼º |
| å°çº¢ä¹¦ç§è‰ç¬”è®°æ™ºèƒ½ä½“ | ğŸ“• | å°çº¢ä¹¦çˆ†æ¬¾é£æ ¼ï¼Œemoji ä¸°å¯Œ |
| è¥é”€è½¬åŒ–æ–‡æ¡ˆæ™ºèƒ½ä½“ | ğŸ’° | AIDA æ¨¡å‹ï¼Œé«˜è½¬åŒ–ç‡ |
| æ•…äº‹å™è¿°æ™ºèƒ½ä½“ | ğŸ“– | æ²‰æµ¸å¼æ•…äº‹ï¼Œæƒ…æ„Ÿå…±é¸£ |
| çŸ¥è¯†ç§‘æ™®æ™ºèƒ½ä½“ | ğŸ“ | ä¸“ä¸šçŸ¥è¯†é€šä¿—åŒ– |

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- IP æ¡£æ¡ˆå¡ç‰‡å±•ç¤ºå½“å‰é¡¹ç›®ä¿¡æ¯
- æ™ºèƒ½ä½“åˆ‡æ¢æ—¶ä¿ç•™å¯¹è¯å†å²
- æ¶ˆæ¯å¤åˆ¶åŠŸèƒ½
- æ¸…ç©ºå¯¹è¯ï¼ˆä¿ç•™ IP å¡ç‰‡ï¼‰

### 2. é¡¹ç›®ç®¡ç†æ¨¡å— (`pages/project`)

ç®¡ç†å¤šä¸ª IP é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®å¯é…ç½®ç‹¬ç«‹äººè®¾ã€‚

**äººè®¾é…ç½®å­—æ®µï¼š**
```typescript
interface PersonaSettings {
  tone: string              // è¯­æ°”é£æ ¼
  catchphrase: string       // å£å¤´ç¦…
  target_audience: string   // ç›®æ ‡å—ä¼—
  benchmark_accounts: string[] // å¯¹æ ‡è´¦å·
  content_style: string     // å†…å®¹é£æ ¼
  taboos: string[]          // å†…å®¹ç¦å¿Œ
  keywords: string[]        // å¸¸ç”¨å…³é”®è¯
  introduction: string      // IP ç®€ä»‹
}
```

### 3. ç™»å½•è®¤è¯æ¨¡å— (`pages/login`)

æ”¯æŒå¾®ä¿¡å°ç¨‹åºæˆæƒç™»å½•å’Œ Mock ç™»å½•ï¼ˆå¼€å‘è°ƒè¯•ï¼‰ã€‚

**ç™»å½•æµç¨‹ï¼š**
1. è°ƒç”¨ `uni.login` è·å–å¾®ä¿¡ç™»å½• code
2. å‘é€ code åˆ°åç«¯æ¢å– JWT token
3. å­˜å‚¨ token å’Œç”¨æˆ·ä¿¡æ¯åˆ°æœ¬åœ°
4. åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦ Authorization å¤´

---

## çŠ¶æ€ç®¡ç†

é‡‡ç”¨ Pinia è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒæœ¬åœ°æŒä¹…åŒ–ã€‚

### Auth Store (`stores/auth.ts`)

ç”¨æˆ·è®¤è¯çŠ¶æ€ç®¡ç†ã€‚

```typescript
// ä¸»è¦ API
const authStore = useAuthStore()

authStore.isLoggedIn      // æ˜¯å¦å·²ç™»å½•
authStore.userInfo        // ç”¨æˆ·ä¿¡æ¯
authStore.token           // JWT Token

authStore.setToken(token) // è®¾ç½® Token
authStore.silentLogin()   // é™é»˜ç™»å½•
authStore.requireLogin()  // æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼Œæœªç™»å½•è·³è½¬ç™»å½•é¡µ
authStore.clearAuth()     // ç™»å‡ºæ¸…é™¤
```

### Project Store (`stores/project.ts`)

é¡¹ç›®ï¼ˆIPï¼‰ç®¡ç†çŠ¶æ€ã€‚

```typescript
// ä¸»è¦ API
const projectStore = useProjectStore()

projectStore.projectList       // é¡¹ç›®åˆ—è¡¨
projectStore.activeProject     // å½“å‰æ¿€æ´»é¡¹ç›®
projectStore.currentPersonaSettings // å½“å‰äººè®¾é…ç½®

projectStore.fetchProjects()   // è·å–é¡¹ç›®åˆ—è¡¨
projectStore.createProject(data) // åˆ›å»ºé¡¹ç›®
projectStore.updateProject(id, data) // æ›´æ–°é¡¹ç›®
projectStore.deleteProject(id) // åˆ é™¤é¡¹ç›®
projectStore.setActiveProject(project) // åˆ‡æ¢é¡¹ç›®
projectStore.getPersonaSystemPrompt() // è·å–äººè®¾ç³»ç»Ÿæç¤ºè¯
```

### Settings Store (`stores/settings.ts`)

å…¨å±€è®¾ç½®ç®¡ç†ï¼ˆAI æ¨¡å‹é€‰æ‹©ç­‰ï¼‰ã€‚

```typescript
// ä¸»è¦ API
const settingsStore = useSettingsStore()

settingsStore.modelType      // å½“å‰æ¨¡å‹ç±»å‹
settingsStore.currentModel   // å½“å‰æ¨¡å‹é…ç½®
settingsStore.availableModels // å¯ç”¨æ¨¡å‹åˆ—è¡¨

settingsStore.setModelType('doubao') // åˆ‡æ¢æ¨¡å‹
```

---

## API è¯·æ±‚å°è£…

å°è£…äº†ç»Ÿä¸€çš„è¯·æ±‚å·¥å…·ï¼Œè‡ªåŠ¨å¤„ç† Tokenã€é”™è¯¯ã€Loading ç­‰ã€‚

### ä½¿ç”¨æ–¹å¼

```typescript
import { get, post, put, del } from '@/utils/request'

// GET è¯·æ±‚
const res = await get<{ projects: Project[] }>('/api/projects')

// POST è¯·æ±‚
const res = await post<{ success: boolean }>('/api/projects', {
  name: 'æˆ‘çš„é¡¹ç›®'
})

// å¸¦é…ç½®çš„è¯·æ±‚
const res = await post('/api/generate', data, {
  showLoading: true,
  loadingText: 'AI ç”Ÿæˆä¸­...',
  timeout: 60000
})
```

### è¯·æ±‚é…ç½®é€‰é¡¹

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `needToken` | boolean | true | æ˜¯å¦æºå¸¦ Token |
| `showLoading` | boolean | false | æ˜¯å¦æ˜¾ç¤º Loading |
| `loadingText` | string | 'åŠ è½½ä¸­...' | Loading æç¤ºæ–‡å­— |
| `timeout` | number | 30000 | è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `useMock` | boolean | false | æ˜¯å¦ä½¿ç”¨ Mock æ•°æ® |

### å“åº”æ‹¦æˆª

- **401** - Token è¿‡æœŸï¼Œè‡ªåŠ¨æ¸…é™¤è®¤è¯ä¿¡æ¯
- **403** - æƒé™ä¸è¶³
- **404** - èµ„æºä¸å­˜åœ¨
- **5xx** - æœåŠ¡å™¨é”™è¯¯

---

## å¤šå¹³å°é€‚é…

### æ”¯æŒçš„å¹³å°

| å¹³å° | å‘½ä»¤ | è¯´æ˜ |
|------|------|------|
| å¾®ä¿¡å°ç¨‹åº | `dev:mp-weixin` | ä¸»è¦ç›®æ ‡å¹³å° |
| H5 Web | `dev:h5` | æµè§ˆå™¨è®¿é—® |
| æ”¯ä»˜å®å°ç¨‹åº | `dev:mp-alipay` | æ”¯ä»˜å®ç”Ÿæ€ |
| æŠ–éŸ³å°ç¨‹åº | `dev:mp-toutiao` | å­—èŠ‚ç”Ÿæ€ |
| ç™¾åº¦å°ç¨‹åº | `dev:mp-baidu` | ç™¾åº¦ç”Ÿæ€ |
| QQ å°ç¨‹åº | `dev:mp-qq` | QQ ç”Ÿæ€ |
| å¿«æ‰‹å°ç¨‹åº | `dev:mp-kuaishou` | å¿«æ‰‹ç”Ÿæ€ |
| å°çº¢ä¹¦å°ç¨‹åº | `dev:mp-xhs` | å°çº¢ä¹¦ç”Ÿæ€ |
| é¸¿è’™ | `dev:mp-harmony` | åä¸ºé¸¿è’™ |
| App | éœ€ HBuilderX | iOS/Android |

### æ¡ä»¶ç¼–è¯‘

```vue
<template>
  <!-- #ifdef MP-WEIXIN -->
  <button open-type="getUserInfo">å¾®ä¿¡æˆæƒ</button>
  <!-- #endif -->
  
  <!-- #ifdef H5 -->
  <button @click="h5Login">H5 ç™»å½•</button>
  <!-- #endif -->
</template>

<script>
// #ifdef MP-WEIXIN
uni.login({ provider: 'weixin' })
// #endif

// #ifndef MP-WEIXIN
// éå¾®ä¿¡ç¯å¢ƒçš„é€»è¾‘
// #endif
</script>
```

---

## AI æ¨¡å‹é…ç½®

### å½“å‰æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | ç±»å‹æ ‡è¯† | çŠ¶æ€ | è¯´æ˜ |
|------|----------|------|------|
| DeepSeek | `deepseek` | âœ… å¯ç”¨ | æ·±åº¦æ±‚ç´¢ï¼Œå›½äº§å¤§æ¨¡å‹ |
| è±†åŒ… | `doubao` | âœ… å¯ç”¨ | å­—èŠ‚è·³åŠ¨ç«å±±å¼•æ“ï¼ˆé»˜è®¤ï¼‰ |
| Claude | `claude` | âœ… å¯ç”¨ | Anthropic Claude |
| GPT-4 | `gpt4` | ğŸ”’ é¢„ç•™ | OpenAI GPT-4 |

### åˆ‡æ¢é»˜è®¤æ¨¡å‹

ä¿®æ”¹ `stores/settings.ts`ï¼š

```typescript
// ä¿®æ”¹é»˜è®¤æ¨¡å‹
const modelType = ref<ModelType>('doubao')  // é»˜è®¤ä½¿ç”¨è±†åŒ…
```

æˆ–åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼š

```typescript
// éªŒè¯ modelTypeï¼Œå¦‚æœæ— æ•ˆåˆ™ä½¿ç”¨é»˜è®¤å€¼
if (!modelType || !['deepseek', 'doubao', 'claude'].includes(modelType)) {
  modelType = 'doubao'  // é»˜è®¤ä½¿ç”¨è±†åŒ…ï¼ˆèŠ‚çœAPIæˆæœ¬ï¼‰
}
```

---

## ç¯å¢ƒé…ç½®

### API åœ°å€é…ç½®

ä¿®æ”¹ `vite.config.ts`ï¼š

```typescript
// å¼€å‘ç¯å¢ƒ API åœ°å€
const DEV_API_URL = "http://localhost:8000";

// ç”Ÿäº§ç¯å¢ƒ API åœ°å€ï¼ˆéƒ¨ç½²æ—¶ä¿®æ”¹æ­¤å¤„ï¼‰
const PROD_API_URL = "https://api.your-domain.com";
```

### å¾®ä¿¡å°ç¨‹åºé…ç½®

ä¿®æ”¹ `src/manifest.json`ï¼š

```json
{
  "mp-weixin": {
    "appid": "ä½ çš„å°ç¨‹åºAppID",
    "setting": {
      "urlCheck": false  // å¼€å‘æ—¶å…³é—­åŸŸåæ ¡éªŒ
    }
  }
}
```

---

## åæœŸæ•°æ®åº“æ‰©å±•è¯´æ˜

å½“å‰å‰ç«¯å·²é¢„ç•™å®Œæ•´çš„æ•°æ®æ¥å£ï¼Œåç«¯å¯æ ¹æ®éœ€è¦æ‰©å±•æ•°æ®åº“ã€‚

### ç”¨æˆ·ç›¸å…³è¡¨

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id VARCHAR(36) PRIMARY KEY,
  openid VARCHAR(64) UNIQUE,       -- å¾®ä¿¡ openid
  nickname VARCHAR(100),
  avatar_url TEXT,
  gender TINYINT DEFAULT 0,
  city VARCHAR(50),
  province VARCHAR(50),
  country VARCHAR(50),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### é¡¹ç›®ç›¸å…³è¡¨

```sql
-- é¡¹ç›®è¡¨
CREATE TABLE projects (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL,
  name VARCHAR(100) NOT NULL,
  industry VARCHAR(50),
  avatar_letter CHAR(1),
  avatar_color VARCHAR(20),
  is_active BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- é¡¹ç›®äººè®¾é…ç½®è¡¨
CREATE TABLE project_personas (
  id VARCHAR(36) PRIMARY KEY,
  project_id VARCHAR(36) NOT NULL UNIQUE,
  tone VARCHAR(50),                    -- è¯­æ°”é£æ ¼
  catchphrase TEXT,                    -- å£å¤´ç¦…
  target_audience VARCHAR(200),        -- ç›®æ ‡å—ä¼—
  benchmark_accounts JSON,             -- å¯¹æ ‡è´¦å·ï¼ˆæ•°ç»„ï¼‰
  content_style TEXT,                  -- å†…å®¹é£æ ¼
  taboos JSON,                         -- å†…å®¹ç¦å¿Œï¼ˆæ•°ç»„ï¼‰
  keywords JSON,                       -- å¸¸ç”¨å…³é”®è¯ï¼ˆæ•°ç»„ï¼‰
  introduction TEXT,                   -- IP ç®€ä»‹
  FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE
);
```

### å¯¹è¯å†å²è¡¨ï¼ˆå¯é€‰æ‰©å±•ï¼‰

```sql
-- å¯¹è¯å†å²è¡¨
CREATE TABLE chat_histories (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL,
  project_id VARCHAR(36),
  agent_type VARCHAR(50),              -- æ™ºèƒ½ä½“ç±»å‹
  model_type VARCHAR(20),              -- ä½¿ç”¨çš„ AI æ¨¡å‹
  role ENUM('user', 'assistant', 'system') NOT NULL,
  content TEXT NOT NULL,
  tokens_used INT,                     -- æ¶ˆè€—çš„ token æ•°
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE SET NULL
);

-- å¯¹è¯ä¼šè¯è¡¨
CREATE TABLE chat_sessions (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL,
  project_id VARCHAR(36),
  title VARCHAR(200),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

### API ä½¿ç”¨ç»Ÿè®¡è¡¨ï¼ˆå¯é€‰æ‰©å±•ï¼‰

```sql
-- API è°ƒç”¨ç»Ÿè®¡
CREATE TABLE api_usage (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL,
  model_type VARCHAR(20) NOT NULL,
  endpoint VARCHAR(100),
  tokens_input INT DEFAULT 0,
  tokens_output INT DEFAULT 0,
  cost DECIMAL(10, 6) DEFAULT 0,       -- è´¹ç”¨ï¼ˆç¾å…ƒ/äººæ°‘å¸ï¼‰
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- ç”¨æˆ·é…é¢è¡¨
CREATE TABLE user_quotas (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL UNIQUE,
  total_tokens INT DEFAULT 100000,     -- æ€»é…é¢
  used_tokens INT DEFAULT 0,           -- å·²ä½¿ç”¨
  reset_at TIMESTAMP,                  -- é‡ç½®æ—¶é—´
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

### å‰ç«¯å¯¹æ¥è¯´æ˜

å‰ç«¯å·²é¢„ç•™ä»¥ä¸‹æ¥å£ï¼Œåç«¯å®ç°åå¯ç›´æ¥å¯¹æ¥ï¼š

```typescript
// é¡¹ç›® CRUD
GET    /api/projects          // è·å–é¡¹ç›®åˆ—è¡¨
POST   /api/projects          // åˆ›å»ºé¡¹ç›®
PUT    /api/projects/:id      // æ›´æ–°é¡¹ç›®
DELETE /api/projects/:id      // åˆ é™¤é¡¹ç›®
POST   /api/projects/switch   // åˆ‡æ¢æ¿€æ´»é¡¹ç›®

// è®¤è¯
POST   /api/auth/login        // å¾®ä¿¡ç™»å½•

// AI ç”Ÿæˆ
POST   /api/generate          // é€šç”¨ç”Ÿæˆæ¥å£

// å¯æ‰©å±•æ¥å£ï¼ˆé¢„ç•™ï¼‰
GET    /api/chat/sessions     // è·å–ä¼šè¯åˆ—è¡¨
GET    /api/chat/history/:id  // è·å–å¯¹è¯å†å²
POST   /api/chat/save         // ä¿å­˜å¯¹è¯
GET    /api/usage/stats       // ä½¿ç”¨ç»Ÿè®¡
```

---

## éƒ¨ç½²æŒ‡å—

### å¾®ä¿¡å°ç¨‹åºå‘å¸ƒ

1. è¿è¡Œ `npm run build:mp-weixin`
2. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
3. å¯¼å…¥ `dist/build/mp-weixin` ç›®å½•
4. ç‚¹å‡»"ä¸Šä¼ "æäº¤å®¡æ ¸

### H5 éƒ¨ç½²

1. ä¿®æ”¹ `vite.config.ts` ä¸­çš„ç”Ÿäº§ç¯å¢ƒ API åœ°å€
2. è¿è¡Œ `npm run build:h5`
3. å°† `dist/build/h5` ç›®å½•éƒ¨ç½²åˆ° Web æœåŠ¡å™¨

### æ³¨æ„äº‹é¡¹

- ç”Ÿäº§ç¯å¢ƒéœ€é…ç½® HTTPS
- å¾®ä¿¡å°ç¨‹åºéœ€åœ¨åå°é…ç½®åˆæ³•åŸŸå
- å»ºè®®å¼€å¯ CDN åŠ é€Ÿé™æ€èµ„æº

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- ä½¿ç”¨ Vue 3 Composition API + `<script setup>` è¯­æ³•
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹çº¦æŸ
- ç»„ä»¶å‘½åé‡‡ç”¨ PascalCase
- æ–‡ä»¶å‘½åé‡‡ç”¨ kebab-case

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: Bug ä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

---

## è®¸å¯è¯

MIT License

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

